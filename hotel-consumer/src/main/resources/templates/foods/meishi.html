<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
	<head>
		<meta charset="UTF-8">
		<title>美食系列</title>
		<link rel="stylesheet" type="text/css" href="/css/common.css"/>
		<link rel="stylesheet" type="text/css" href="/css/styles.css"/>
		<div th:include="base::base"></div>
	</head>
	<body>
		<div class="clearfix nav">
			<a class="logo" href="javascript:;"></a>
			<ul class="clearfix nav-wrap">
				<li><a class="nav-item nav-active" href="/toFoods">首页</a></li>
				<li><a class="nav-item" href="/topinpai">品牌故事</a></li>
				<li><a class="nav-item" href="/tomeishi">美食系列</a></li>
				<li><a class="nav-item" href="/toshop">店面展示</a></li>
				<li><a class="nav-item" href="/tonews">新闻资讯</a></li>
				<li><a class="nav-item" href="/toaboutus">关于我们</a></li>
			</ul>
		</div>
		
		<div id="container">
			<div id="buttons">
		        <span index="1" class="on"></span>
		        <span index="2"></span>
		        <span index="3"></span>
		    </div>
		    <a href="javascript:;" id="prev" class="arrow"><img src="img/l.png"/></a>
		    <a href="javascript:;" id="next" class="arrow"><img src="img/r.png"/></a>
		</div>
		
		<ul class="breadnav clearfix">
			<li class="bnav-item"><a href="/toFoods">首页</a></li>
			<li class="bnav-item">&lt;</li>
			<li class="bnav-item"><a href="/tomeishi">美食系列</a></li>
			<li class="bnav-item">&lt;</li>
			<li class="bnav-item"><a href="javascript:;">全部菜品</a></li>
		</ul>
		<form>
		<div class="clearfix table-wrap" id="tab-span">
			<span class="table-item table-active">全部菜品</span>
			<span class="table-item">经典牛排</span>
			<span class="table-item">意面/烩饭</span>
			<span class="table-item">风味披萨</span>
			<span class="table-item">甜品小食</span>
			<span class="table-item">酒水饮料</span>
			<span class="table-item" id="queryAllSetMeal">其他</span>
			<div class="search clearfix">
				<input  type="text" name="foodname"/>
				<button type="button" id="submitForm" class="btn btn-default">查询</button>
			</div>
		</div>
		</form>
		<div id="table-div">
			<div class="table-pic table-show clearfix">
				<div id="hahahahahah"></div>
			</div>
		</div>
		<!--分页-->
		<div class="col-xs-10">
			<nav aria-label="Page navigation" class="text-center">
				<ul class="ms-paging clearfix" id="fengye">

				</ul>
			</nav>
		</div>

		<div class="foot">
			<div class="foot-wrap">
				<p class="foot-tit">友情链接</p>
				<ul class="foot-link clearfix">
					<li class="foot-pic">
						<a href="javascript:;"><img src="img/link6.png"/></a>
					</li>
					<li class="foot-pic">
						<a href="javascript:;"><img src="img/link5.png"/></a>
					</li>
					<li class="foot-pic">
						<a href="javascript:;"><img src="img/link4.png"/></a>
					</li>
					<li class="foot-pic">
						<a href="javascript:;"><img src="img/link3.png"/></a>
					</li>
					<li class="foot-pic">
						<a href="javascript:;"><img src="img/link2.png"/></a>
					</li>
					<li class="foot-pic">
						<a href="javascript:;"><img src="img/link1.png"/></a>
					</li>
				</ul>
				<div class="copyright">
					<p>CopyRight©2003-2015 www.91cy.cn All rigt rederved</p>
					<p>版权所有：贵族食代牛排有限公司  来源:<a href="http://www.mycodes.net/" target="_blank">源码之家</a></p>
					<p>ICP备案号：京ICP备16047255号-3本站信息由会员自主添加，如信息涉及隐私等，网站不承担任何责任！</p>
				</div>
			</div>
		</div>

	</body>
	<!--jq调用-->
	<script src="js/jquery-1.11.0.js" type="text/javascript"></script>

	<script type="text/javascript">
		//导航当前项切换	
		$(".nav-item").click(function(){
			$(this).parent("li").siblings().children().removeClass("nav-active");		
			//点击对象的父级（li）的兄弟级（li）的子集（a）移除类
			$(this).addClass("nav-active");												
			//给点击对象添加类
		});
		//美食系列当前项切换
		$(".table-item").click(function(){
			$(this).siblings().removeClass("table-active");
			$(this).addClass("table-active");
		});
	    //美食系列table切换
	    var oSpan = document.getElementById("tab-span");
			var spans = oSpan.querySelectorAll("span");
			var oDiv  = document.getElementById("table-div");
			var divs = oDiv.querySelectorAll("div");
			var last=spans[0];
			for(var i=0;i<spans.length;i++){
					spans[i].index=i;  //给每一个按钮添加一个自定义属性，存储的是他们对应的索引值；
					spans[i].onclick=function(){
						divs[last.index].style.display="none"; //上一个对应的div，让他隐藏
						divs[this.index].style.display="block"; //当前点击按钮对应的div显示			
						last=this; 	//把上一次点击的对象更新成当前点击的对象
					};
				};
	</script>


	<script type="text/javascript">
        $(function () {
            operatorLoad(-1);
            $("button[id='submitForm']").click(function () {
                operatorLoad(-1);
            })
        });
        function clickPage(pageNum) {
            operatorLoad(pageNum);
        }
        // 加载分页
        function pageInfoUtil(result) {
            $("ul[id='fengye']").html("");
            var pagePre = 1;
            if(result.pageNo<=1){
                pagePre = 1;
            }else{
                pagePre = Number(result.pageNo)-1;
            }
            var pageHtml = "";
            pageHtml+="<li class='pag-item' no='"+result.pageNo+"'>"
                +"<a href='javascript:void(0)' onclick='clickPage("+pagePre+")'  aria-label='Previous' >"
                +"<span aria-hidden='true'>&laquo;</span>"
                +"</a>"
                +"</li>";
            $.each(result.navigatepageNums, function (index,item) {
                if(result.pageNo==item){
                    pageHtml+="<li class='pag-item' th:no='"+item+"'><a href='javascript:void(0)' onclick='clickPage("+item+")' >"+item+"</a></li>";
                }else{
                    pageHtml+="<li class='pag-item' th:no='"+item+"'><a href='javascript:void(0)' onclick='clickPage("+item+")'>"+item+"</a></li>";
                }
            })
            pageHtml+="<li class='pag-item' th:no='"+result.totalPageCount+"'><a href='javascript:void(0)' aria-label='Next' onclick='clickPage("+result.totalPageCount+")'>"
                +"<span aria-hidden='true'>&raquo;</span>"
                +"</a>"
                +"</li>";
            $("ul[id='fengye']").html(pageHtml);

        }

        function operatorLoad(pageNum){

            // 表单序列化
            var data = $("form").serialize();
            $.post("/queryAllDelicious",data+"&pageNum="+pageNum,function (result) {
                var list = result.list;
                // 加载分页
                pageInfoUtil(result);
                $("#hahahahahah").html("");
                var html = "";
                html +=  "<ul>";
                $.each(list,function (index,item) {
                   html+="<li>"
					+"<a href='/tomeishicon' class='ms-wrap ms-right'>"
					+"<span class='ms-pic'><img src='"+item.foodimgone+"' alt='' width='300px' height='300px'/>'</span>"
					+"<h2 class='ms-tit'>"+item.foodname+"</h2>"
					+"<p class='ms-txt'>价格:"+item.foodprice+"</p></a>"
					+"</li>"
                })
                html += "</ul>";
                $("#hahahahahah").html(html);
            })
        }

	</script>

</html>
