<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Operator</title>
    <div th:include="base::base"></div>
</head>
<body>

    <div class="container">
        <div class="row">
            <br>
            <div>
            <form class="form-inline">
                <div class="form-group col-md-4">
                    <label for="exampleInputName2">工作人员名称：</label>
                    <input type="text" name="oName" class="form-control" id="exampleInputName2" placeholder="姓名">
                </div>
                <div class="form-group col-md-3">
                    <label for="exampleInputEmail2">操作人员部门：</label>
                    <select class="form-control" name="oDepartment" id="exampleInputEmail2">
                    </select>
                    <!--<input type="email" class="form-control" id="exampleInputEmail2" placeholder="jane.doe@example.com">-->
                </div>
                <div class="form-group col-md-3">
                    <label for="status">工作状态：</label>
                    <select class="form-control" name="oWorkStatus" id="status">
                    </select>
                    <!--<input type="email" class="form-control" id="exampleInputEmail2" placeholder="jane.doe@example.com">-->
                </div>

                <div class="form-group col-md-2">
                    <label for="gender">性别：</label>
                    <select class="form-control" name="oGender" id="gender">
                        <option value="">--请选择--</option>
                        <option value="男">男</option>
                        <option value="女">女</option>
                    </select>
                    <!--<input type="email" class="form-control" id="exampleInputEmail2" placeholder="jane.doe@example.com">-->
                </div>

                <button type="button" id="submitForm" class="btn btn-info btn-block">
                    <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    查询
                </button>

            </form>
            </div>
            <br>
            <div id="listOperator">

                <!--<table class="table table-striped table-hover">
                    <tr class="info">
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>5</th>
                        <th>6</th>
                        <th>操作</th>
                    </tr>
                    <tr>
                        <td>q</td>
                        <td>w</td>
                        <td>e</td>
                        <td>r</td>
                        <td>d</td>
                        <td>f</td>
                        <td class="col-md-1 ">
                            <a href=""><span class="glyphicon glyphicon-eye-open " title="查看" aria-hidden="true"></span></a>
                            <a href=""><span class="glyphicon glyphicon-pencil " title="编辑" aria-hidden="true"></span></a>
                            <a href=""><span class="glyphicon glyphicon-trash" title="删除" aria-hidden="true"></span></a>
                        </td>
                    </tr>

                </table>-->
            </div>

            <div class="col-xs-10">
                <nav aria-label="Page navigation">
                    <ul class="pagination" id="fengye">

                    </ul>
                </nav>
            </div>

        </div>
    </div>
<script type="text/javascript">
    $(function () {
        // 加载人员列表
        operatorLoad(-1);

        // 点击分页
        // $("a[no]").click(function () {
        //     alert();
        //     var pageNum = $(this).attr("no");
        //     alert(pageNum);
        //     operatorLoad(pageNum);
        // })

        // $("ul li").click(function () {
        //     alert();
        // })

        // 查询按钮
        $("button[id='submitForm']").click(function () {
            operatorLoad(-1);
        })

        // 加载部门
        loadSelect("OPERATOR_DEPARTMENTS", $("select[name='oDepartment']"));
        // 加载工作状态
        loadSelect("OPERATOR_WORK_STATUS", $("select[name='oWorkStatus']"));



    })

    function clickPage(pageNum) {
         // alert(pageNum);
        operatorLoad(pageNum);
    }


    // 加载分页
    function pageInfoUtil(result) {
        $("ul[id='fengye']").html("");
        var pagePre = Number(result.pageNumF)-1;
        var pageHtml = "";
         pageHtml+="<li no='"+result.pageNumF+"'>"
                        +"<a href='javascript:void(0)' onclick='clickPage("+pagePre+")'  aria-label='Previous' >"
                        +"<span aria-hidden='true'>&laquo;</span>"
                    +"</a>"
                    +"</li>";
        $.each(result.navIgtePageNumbers, function (index,item) {
            if(result.pageNumF==item){
                pageHtml+="<li class='active' th:no='"+item+"'><a href='javascript:void(0)' onclick='clickPage("+item+")' >"+item+"</a></li>";
            }else{
                pageHtml+="<li class='' th:no='"+item+"'><a href='javascript:void(0)' onclick='clickPage("+item+")'>"+item+"</a></li>";
            }
        })
        pageHtml+="<li th:no='"+result.pagesF+"'><a href='javascript:void(0)' aria-label='Next' onclick='clickPage("+result.pagesF+")'>"
            +"<span aria-hidden='true'>&raquo;</span>"
            +"</a>"
            +"</li>";
        $("ul[id='fengye']").html(pageHtml);

    }
    
    
    // 加载操作人员列表
    function operatorLoad(pageNum){

        // 表单序列化
        var data = $("form").serialize();
        $.post("ajaxQueryOperators",data+"&pageNum="+pageNum,function (result) {
            var list = result.listF;
            // 加载分页
            pageInfoUtil(result);
            $("#listOperator").html("");
            var html = "";
            html +=  "<table class='table table-striped table-hover'>"
                        +"<tr class='info'>"
                        +"<th>编号</th>"
                        +"<th>姓名</th>"
                        +"<th>电话</th>"
                        +"<th>性别</th>"
                        +"<th>住址</th>"
                        +"<th>部门</th>"
                        +"<th>操作</th>"
                        +"</tr>";
            $.each(list,function (index,item) {
                html += "<tr >"
                    +"<td>"+item.oId+"</td>"
                    +"<td>"+item.oName+"</td>"
                    +"<td>"+item.oTel+"</td>"
                    +"<td>"+item.oGender+"</td>"
                    +"<td>"+item.oAddress+"</td>"
                    +"<td>"+item.oDepartment+"</td>"
                    +"<td class='col-md-1 '>"
                    +"<a href=''><span class='glyphicon glyphicon-eye-open ' title='查看' aria-hidden='true'></span></a> "
                    +"<a href=''><span class='glyphicon glyphicon-pencil ' title='编辑' aria-hidden='true'></span></a> "
                    +"<a href=''><span class='glyphicon glyphicon-trash' title='删除' aria-hidden='true'></span></a> "
                    +"</td>"
                    +"</tr>";
            })
            html += "</table>";
            $("#listOperator").html(html);
            
        })
    }

    // 加载下拉框
    function loadSelect(code, e){
        $.get("dataStatus/queryByCode","code="+code,function(result){
            e.append("<option value='-1'>--请选择--</option>");
            $.each(result, function (index,item) {
                e.append("<option value='"+item.valueId+"'>"+item.valueName+"</option>");
            })
        })
    }


</script>
</body>
</html>